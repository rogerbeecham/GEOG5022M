<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="By">
<title>GEOG5022 : Introduction to R I</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-right">
<div id="header">
<h1>GEOG5022 : Introduction to R I</h1>
<div class="details">
<span id="author" class="author">By</span><br>
<span id="email" class="email"><a href="https://www.roger-beecham.com">Roger Beecham</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#_what_is_r">What is R?</a></li>
<li><a href="#_why_r">Why R?</a>
<ul class="sectlevel2">
<li><a href="#_free_open_source_with_an_active_community">Free, open-source with an active community</a></li>
<li><a href="#_r_supports_modern_data_analysis_workflows">R supports <strong>modern</strong> data analysis workflows</a></li>
</ul>
</li>
<li><a href="#_task_1_get_familiar_with_the_r_and_rstudio_environment">Task 1. Get familiar with the R and RStudio environment</a>
<ul class="sectlevel2">
<li><a href="#_open_rstudio">Open RStudio</a></li>
<li><a href="#_type_some_console_commands">Type some console commands</a></li>
<li><a href="#_install_some_packages">Install some packages</a></li>
<li><a href="#_read_in_some_data">Read in some data</a></li>
</ul>
</li>
<li><a href="#_task_2_perform_some_exploratory_data_analysis">Task 2. Perform some exploratory data analysis</a>
<ul class="sectlevel2">
<li><a href="#_do_some_data_wrangling">Do some data wrangling</a></li>
<li><a href="#_create_some_summary_graphics">Create some summary graphics</a></li>
</ul>
</li>
<li><a href="#_task_3_perform_some_exploratory_spatial_data_analysis">Task 3. Perform some exploratory spatial data analysis</a>
<ul class="sectlevel2">
<li><a href="#_load_in_some_spatial_and_other_attribute_data">Load in some spatial (and other attribute) data</a></li>
<li><a href="#_explore_spatial_variation_in_the_leaveremain_vote">Explore spatial variation in the Leave:Remain vote</a></li>
</ul>
</li>
<li><a href="#_task_4_data_challenge">Task 4. Data challenge</a></li>
<li><a href="#_task_5_coding_exercises_optional">Task 5. Coding exercises (optional)</a></li>
<li><a href="#_further_reading">Further reading</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>This session introduces a key technology for doing data analysis used widely in academia and industry: R. As well as learning what R is&#8201;&#8212;&#8201;its history and use&#8201;&#8212;&#8201;you will begin to perform some exploratory analysis in R on a real (spatial) dataset. The interface through which you&#8217;ll interact with R is called RStudio. Both R and RStudio are free to use.</p>
</div>
<div class="paragraph">
<p>This first session provides much introductory material and discussion&#8201;&#8212;&#8201;it requires some reading. The second session will assume greater knowledge/familiarity and will be more task focussed.</p>
</div>
<div class="paragraph">
<p>By the end of this session you should be able to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>open R using the RStudio Graphical User Interface (GUI)</p>
</li>
<li>
<p>install and enable R libraries and query library documentation</p>
</li>
<li>
<p>read in <code>.csv</code> files as R <code>DataFrames</code></p>
</li>
<li>
<p>perform data wrangling activities on R <code>DataFrames</code></p>
</li>
<li>
<p>calculate summary statistics over R <code>DataFrames</code></p>
</li>
<li>
<p>create statistical graphics using the <code>ggplot2</code> library</p>
</li>
<li>
<p>generate a Choropleth map in R using the <code>tmap</code> library</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For the next two sessions we&#8217;ll be learning about a key technology for doing spatial data analysis: <a href="https://www.r-project.org">R</a>. It has origins in academia, but is now global in reach and used by an increasingly impressive number of organisations.</p>
</div>
<div class="paragraph">
<p>There is not sufficient time to discuss the fundamentals of the R language in depth. Rather, these sessions aim to give you a flavour of working with R, along with the most useful software and libraries.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_r">What is R?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>R is a free, open statistical programming language and environment. Released as open source software as part of a research project in 1995, for some time R was the preserve of academics. From 2010s onwards, R enjoyed rapid growth and is used increasingly outside of academia, by organisations such as Google [<a href="https://research.google.com/pubs/pub37483.html">example</a>], Facebook [<a href="http://flowingdata.com/2010/12/13/facebook-worldwide-friendships-mapped/">example</a>], Twitter [<a href="https://blog.twitter.com/official/en_us/a/2013/the-geography-of-tweets.html">example</a>], New York Times [<a href="http://www.nytimes.com/interactive/2012/05/05/sports/baseball/mariano-rivera-and-his-peers.html?ref=baseballexample">example</a>], BBC [<a href="https://bbc.github.io/rcookbook/">example</a>] and many more.</p>
</div>
<div class="paragraph">
<p>Rather than simply a free alternative to proprietary statistical analysis software such as SPSS, R is a programming language in and of itself and can be used for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>As a GIS: <a href="https://r.geocompx.org/">Geocomputation with R</a></p>
</li>
<li>
<p>Data visualization analysis and design: <a href="https://vis4sds.github.io/vis4sds/">Visualization for Social Data Science</a></p>
</li>
<li>
<p>As a word processor / web publisher: e.g. <a href="https://quarto.org/">Quarto</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_r">Why R?</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_free_open_source_with_an_active_community">Free, open-source with an active community</h3>
<div class="paragraph">
<p>There are many benefits that come from being fully open-source, with a critical mass of users.</p>
</div>
<div class="paragraph">
<p>Firstly, there is a burgeoning array of online forums, tutorials and code examples through which to learn R. <a href="https://stackoverflow.com/questions/tagged/r">StackOverflow</a> is a particularly useful resource for answering more individual questions.</p>
</div>
<div class="paragraph">
<p>Second, with such a large community, there are numerous expert R users who themselves contribute by developing <em>libraries</em> or <em>packages</em> that extend its use.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>An R package is a bundle of code, data and documentation, usually hosted centrally on the CRAN (Comprehensive R Archive Network). A particularly important set of packages is the <a href="http://www.tidyverse.org">tidyverse</a>: a set of libraries authored mainly by <a href="http://hadley.nz">Hadley Wickham</a>, which share a common underlying philosophy, syntax and documentation.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_r_supports_modern_data_analysis_workflows">R supports <strong>modern</strong> data analysis workflows</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Reproducible research is the idea that data analyses, and more generally, scientific claims, are published with their data and software code so that others may verify the findings and build upon them.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Roger Peng<br>
<cite>Jeff Leek and Brian Caffo</cite>
</div>
</div>
<div class="paragraph">
<p>In recent years there has been much introspection around how science works&#8201;&#8212;&#8201;around how statistical claims are made from reasoning over evidence. This came on the back of, amongst other things, a high profile paper published in <a href="http://science.sciencemag.org/content/349/6251/aac4716">Science</a>, which found that of 100 recent peer-reviewed psychology experiments, the findings of only 39 could be replicated. The upshot is that researchers must now make every possible effort to make their work transparent. In this setting, traditional data analysis software that support point-and-click interaction is unhelpful; it would be tedious to make notes describing all interactions with, for example, SPSS. As a declarative programming language, however, it is very easy to provide such a provenance trail for your workflows in R since this necessarily exists in your analysis scripts.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_task_1_get_familiar_with_the_r_and_rstudio_environment">Task 1. Get familiar with the R and RStudio environment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_open_rstudio">Open RStudio</h3>
<div class="openblock">
<div class="title">Figure 2: Example RStudio interface.</div>
<div class="content">
<div class="paragraph">
<p><span class="image"><img src="images/r_studio.png" alt="r studio"></span></p>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Instructions
</td>
<td class="hdlist2">
<p>Open RStudio. Click <code>File</code> &#8594; <code>New File</code> &#8594; <code>R Script</code>.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>You should see a set of windows roughly similar to those in the figure above. The top left pane is the <em>Code Editor</em>. This is where you&#8217;ll write, organise and comment R code for execution. Code snippets can be executed using <code>Run</code> at the top of the RStudio pane or typing <code>cmd R</code> (Mac) <code>ctr R</code> (Windows).  Below this, in the bottom left pane is the <em>R Console</em>, in which you write and execute commands directly. To the top right is a pane with the tabs <em>Environment</em> and <em>History</em>. The purpose of these will soon be clear. In the bottom right is a pane for navigating through project directories (<em>Files</em>), displaying <em>Plots</em>, details of installed and loaded <em>Packages</em> and documentation on the functions and packages you&#8217;ll use (<em>Help</em>).</p>
</div>
</div>
<div class="sect2">
<h3 id="_type_some_console_commands">Type some console commands</h3>
<div class="paragraph">
<p>You&#8217;ll initially use R as a calculator by typing commands directly into the <em>Console</em>. You&#8217;ll create a variable (<code>x</code>) and assign it a value using the assignment operator (<code>&lt;</code> <code>-</code>), then perform some simple statistical calculations using functions that are held within the (<code>base</code>) package.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># Create variable and assign a value.
x &lt;- 4
# Perform some calculations using R as a calculator.
x_2 &lt;- x^2
# Perform some calculations using functions that form baseR.
x_root &lt;- sqrt(x_2)</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Instructions
</td>
<td class="hdlist2">
<p>Type the commands contained in the code block above into your R Console. Notice that since you are <em>assigning</em> values to each of these objects, these are stored in memory and appear under the <em>Global Environment</em> pane.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>base</code> package is core and native to R. Unlike all other packages, it does not need to be installed and called explicitly. One means of checking the package to which a function you are using belongs is to call the help command (<code>?</code>) on that function: e.g. <code>?mean()</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_install_some_packages">Install some packages</h3>
<div class="paragraph">
<p>In these introductory sessions, you&#8217;ll be using a collection of <em>packages</em> that form part of the so-called <em>tidyverse</em>. Do read some of the documentation provided from the <em>tidyverse</em> <a href="http://www.tidyverse.org">project website</a> to learn more around its philosophy. The packages together provide a very intuitive means of interacting with R and support  analysis tasks that form most data science workflows (see <a href="https://r4ds.hadley.nz/intro.html">Wickham et al. 2023</a>).</p>
</div>
<div class="paragraph">
<p>There are two steps to making packages available in your working environment: <code>install.packages(&lt;package-name&gt;)</code> downloads the named package from a repository, <code>library(&lt;package-name&gt;)</code> makes the package available in your current session.</p>
</div>
</div>
<div class="sect2">
<h3 id="_read_in_some_data">Read in some data</h3>
<div class="paragraph">
<p>The sessions will cover a topic with which you may be familiar: the UK&#8217;s referendum vote on membership of the EU. You&#8217;ll start by exploring the results data published at Local Authority level and made available in <code>.csv</code> form by <a href="https://www.electoralcommission.org.uk">The Elecctoral Commission</a>. You&#8217;ll do so using the <code>readr</code> package (part of the <em>tidyverse</em>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># Exploratory analysis of Brexit data.
#
# Author: &lt;your-name&gt;
#####################################

# Load required packages.
# Tidyverse. Uncomment if you have not already installed this.
# install.packages(&quot;tidyverse&quot;) #install
library(tidyverse) #load

# SimpleFeatures package for working with spatial data.
# Uncomment if you have not already installed this.
# install.packages(&quot;sf&quot;) #install
library(sf) #load

# tmap library uses syntax very similar to ggplot2.
# Uncomment if you have not already installed this.
# install.packages(&quot;tmap&quot;) #install
library(tmap) #load


# Read in results data. Note that the read_csv method belongs to the readr
# package. Whilst the baseR equivalent read.csv is also fine, read_csv reads in
# data as a special class of data frame (tibble).
referendum_data &lt;- read_csv(&quot;https://www.electoralcommission.org.uk/sites/default/files/2019-07/EU-referendum-result-data.csv&quot;)</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Instructions
</td>
<td class="hdlist2">
<p>In the editor pane of RStudio write the code and comments in the block above. Execute by clicking <code>run</code> or <code>cmd+r</code> (Mac) <code>ctr+r</code> (Windows). Then save the R script with an appropriate name like  <code>brexit_analysis.R</code>.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Notice that the results data now appears under the <code>Data</code> field of the <em>Environment</em> pane. It is stored as a <em>data frame</em>&#8201;&#8212;&#8201;a spreadsheet-like representation where rows correspond to individual observations and columns are variables. You can inspect a data frame as you would a spreadsheet by typing <code>View(&lt;dataframe-name&gt;)</code> or by pointing and clicking on the named data frame in the <em>Environment</em> pane. You can also get a quick view on a data frame&#8217;s contents by typing <code>glimpse(&lt;dataframe-name&gt;)</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_task_2_perform_some_exploratory_data_analysis">Task 2. Perform some exploratory data analysis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_do_some_data_wrangling">Do some data wrangling</h3>
<div class="paragraph">
<p><em>Data wrangling</em> type operations are supported by functions that form the <em>dplyr</em> package. Again, <em>dplyr</em> is within the family of packages that comprise the <em>tidyverse</em>. Its functions are named with verbs that neatly describe their purpose&#8201;&#8212;&#8201;<code>filter()</code>, <code>select()</code>, <code>arrange()</code>, <code>group_by()</code>, <code>summarise()</code> and more. The pipe (<code>%&gt;%</code>, or <code>|&gt;</code>) is a particularly handy operator that allows calls to these functions to be chained together.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># Calculate the LA share of Leave vote by Region.
region_summary &lt;- referendum_data |&gt;
      group_by(Region) |&gt;
        summarise(share_leave=sum(Leave)/sum(Valid_Votes)) |&gt;
           arrange(desc(share_leave))
print(region_summary)</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Instructions
</td>
<td class="hdlist2">
<p>Add the code block to your R script and run only that block above. Run <code>View(region_summary)</code>. Given the result that&#8217;s printed to your R Console, consider each line in the code block. Hopefully you will appreciate that chaining functions in this way (e.g. using <code>|&gt;</code>) enables you to construct quite expressive code.</p>
</td>
</tr>
</table>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Individual coding task
</td>
<td class="hdlist2">
<p>Create two new variables in <code>referendum_data</code>&#8201;&#8212;&#8201;one named <code>share_leave</code> and one named <code>margin_leave</code>. <code>share_leave</code> should express the Leave vote as a share of valid votes cast; <code>margin_leave</code> should contain the direction and size of margin of the Leave vote share. You will need to make use of the <em>dplyr</em> function <code>mutate()</code>. Hint: to compute the size of margin, you will need to do some basic subtraction on the <code>share_leave</code> variable. Again, check that you have correctly created the variables by running <code>View(referendum_data)</code>.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_some_summary_graphics">Create some summary graphics</h3>
<div class="openblock">
<div class="title">Figure 3: Size of margin in favour of Leave:Remain by UK Local Authority.</div>
<div class="content">
<div class="paragraph">
<p><span class="image"><img src="images/plot_grammar_margin.png" alt="plot grammar margin"></span></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>ggplot2</code> is a powerful and widely used package for producing statistical graphics&#8201;&#8212;&#8201;and again a package that is core to the <em>tidyverse</em>. It has a very strong theoretical underpinning, based on a framework for data visualization known as <a href="http://www.springer.com/gb/book/9780387245447"><em>The Grammar of Graphics</em></a> (Wilkinson 2005). The general approach is of treating graphical elements separately and building features in a series of layers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># Code for creating additional variables (from the individual coding task).
referendum_data &lt;- referendum_data |&gt;
                      mutate(share_leave=Leave/Valid_Votes,
                        margin_leave=share_leave-0.5 )

# Create ordered bar chart of result ordered by LA.
referendum_data |&gt;
  filter(Area!=&quot;Gibraltar&quot;) |&gt;
  ggplot(aes(x=reorder(Area,-share_leave), y=margin_leave, fill=margin_leave))+
  geom_bar(stat=&quot;identity&quot;, width=1)+
  scale_fill_distiller(palette = 5, type=&quot;div&quot;, direction=1, guide=&quot;colourbar&quot;, limits=c(-0.3,0.3))+
  scale_x_discrete(breaks=c(&quot;Lambeth&quot;,&quot;Slough&quot;,&quot;Boston&quot;)) +
  geom_hline(aes(yintercept=0))+
  theme_classic()+
  xlab(&quot;LAs by Leave (asc)&quot;)+
  ylab(&quot;Margin Leave/Remain&quot;)</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Instructions
</td>
<td class="hdlist2">
<p>Add the code block above to your R Script and run. You should hopefully see in the <em>Plots</em> window a graphic closely resembling Figure 3.</p>
</td>
</tr>
</table>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Individual coding task
</td>
<td class="hdlist2">
<p>Try experimenting with the <code>ggplot2</code> layers for yourself. You might want to start with a simpler plot&#8201;&#8212;&#8201;for example the code block below, which produces a bar chart of the share of Leave vote by Region. Here vote share is mapped to bar length, but the bars are unordered and colour is not mapped to any data characteristic. Think about the ideas used in the LA-level bar chart to make a more data-rich graphic. Hint: if you were to order your bar chart by the Leave vote, you would want to reorder the x (category axis) using the function <code>reorder(Region,share_leave)</code>.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># Code for simple bar chart of regional summary data.
region_summary |&gt;
  ggplot(aes(x=Region, y=share_leave))+
  geom_bar(stat=&quot;identity&quot;)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For those used to working in point-and-click interfaces, generating code to describe graphics may seem unnecessary. However, once you learn how to construct graphics in this way&#8201;&#8212;&#8201;once you learn the <code>ggplot2</code> grammar&#8201;&#8212;&#8201;it is possible to very quickly generate relatively sophisticated exploratory graphics. That the grammar forces you to think more abstractly about data type and visual mapping is an important point. It introduces you to a key tenet of Information Visualization theory by stealth, but also encourages you to think in depth about your data, its structure and (since you&#8217;re producing graphics) the insights that can be made from visualizing that structure.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_task_3_perform_some_exploratory_spatial_data_analysis">Task 3. Perform some exploratory spatial data analysis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_load_in_some_spatial_and_other_attribute_data">Load in some spatial (and other attribute) data</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># A pre-prepared simple features data frame that loads Local Authority outlines
# (as sfc_MULTIPOLYGON) and 2011 Census data that we'll use
# to model the vote for the remaining sessions.
data_gb &lt;- st_read(&quot;http://www.roger-beecham.com/GEOG5022M/data/data_gb.geojson&quot;)</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Instructions
</td>
<td class="hdlist2">
<p>Add the code block above to your R Script and run. You should hopefully see in the <em>Data</em> window a new data frame called <code>data_gb</code>.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The data frame we&#8217;ve called <code>data_gb</code> is a special class of data frame to the extent that it contains a <code>list-col</code> variable (called <code>geometry</code>) in which are stored coordinates defining the spatial extent of Local Authority boundaries. Storing spatial information in this way is made possible via the <em>Simple Features</em> (<code>sf</code>) package. The details of this package and of spatial data handling in R are beyond the scope of this introductory session. If you are keen to push on with R, worth investigating is <a href="http://https://r.geocompx.org/">Geocomputation with R</a>, authored by <a href="http://robinlovelace.net">Robin Lovelace</a> (of Leeds) and others.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_explore_spatial_variation_in_the_leaveremain_vote">Explore spatial variation in the Leave:Remain vote</h3>
<div class="paragraph">
<p>In this section, you will analyse variation in EU referendum voting behaviour by Local Authority by generating various choropleth maps. You will do so using the <a href="https://github.com/mtennekes/tmap">tmap</a> package, a user-friendly library that adopts a syntax similar to that of <code>ggplot2</code>.</p>
</div>
<div class="paragraph">
<p>The general form of a <em>tmap</em> specification:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A data frame containing a geometry field <code>(sfc_MULTIPOLYGON)</code> must be supplied to <code>tm_shape()</code>.</p>
</li>
<li>
<p>To <code>tm_fill()</code>, we identify the variable values on which polygons should be coloured as well as information such as the colour mapping (sequential, diverging or continuous) and palette to use.</p>
</li>
<li>
<p><code>tm_layout()</code> provides control over titles, legends etc.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># Generate a choropleth displaying share of leave vote by Local Authority area.
tm_shape(data_gb) +
  tm_fill(col=&quot;share_leave&quot;, style=&quot;cont&quot;, size=0.2, id=&quot;geo_label&quot;, palette=&quot;Blues&quot;, title=&quot;&quot;) +
  tm_borders(col=&quot;#bdbdbd&quot;, lwd=0.5) +
  tm_layout(
    title=&quot;LA share of Leave vote&quot;,
    title.snap.to.legend=TRUE,
    title.size=0.8,
    legend.text.size=0.6,
    title.position = c(&quot;right&quot;, &quot;center&quot;),
    legend.position = c(&quot;right&quot;,&quot;center&quot;),
    frame=FALSE,
    legend.outside=TRUE)</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Instructions
</td>
<td class="hdlist2">
<p>Add the code block to your R script Run. You should see a map resembling that in the left of Figure 3.</p>
</td>
</tr>
</table>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Individual coding task
</td>
<td class="hdlist2">
<p>Create a new choropleth that displays the <em>margin</em> in favour of Leave:Remain (a spatial equivalent of Figure 4). You will need to affect the column (<code>col=</code>) to which <code>tm_fill()</code> maps, as well as the palette (<code>palette=</code>) that is used (it should be <code>"RdBu"</code>). Remember, if you need more information about  parameter options type <code>?&lt;method-name&gt;</code> into the R Console. Your map should look similar to the second map from the left in Figure 4.</p>
</td>
</tr>
</table>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Individual coding task
</td>
<td class="hdlist2">
<p>An obvious problem with displaying social phenomena on a conventional map is that visual salience is given to rural areas where relatively few people live, with patterns in urban areas de-emphasised.  A partial solution is to split our map on the <code>Region</code> variable, resulting is a set of small multiple choropleths. This can be achieved with a call to <code>tm_facets(&lt;"variable-name"&gt;)</code>. Adapt your code used to generate the choropleth map with this addition (e.g. <code>+ tm_facets("Region", free.coords=TRUE)</code>). You should end up with a map resembling the second from the right in Figure 4.</p>
</td>
</tr>
</table>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Instructions
</td>
<td class="hdlist2">
<p>An alternative and more direct approach to dealing with the salience bias of rural areas is through a <a href="https://en.wikipedia.org/wiki/Cartogram">cartogram</a>. Cartograms allow spatial units (Local Authorities in this case) to be sized according to the phenomena of interest. Copy the code block below to create a cartogram similar to that presented in the right of Figure 4.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># Install cartogram package.
install.packages(&quot;cartogram&quot;)
library(cartogram)
# Construct a new data frame, using the cartogram_cont() function, passing as a
# parameter into the function the variable to which polygons are to be sized:
# total_pop (number of voters in LA). This may take a while.
data_gb_carto &lt;- cartogram_cont(data_gb %&gt;% st_transform(crs=27700), &quot;total_pop&quot;, itermax=10)


# Generate a choropleth using the same specification used in the conventional map,
# but supplying the new data frame to tm_shape:
# e.g. tm_shape(data_gb_carto) +
#        etc.</code></pre>
</div>
</div>
<div class="openblock">
<div class="title">Figure 4: Choropleths displaying the Leave:Remain vote by UK Local Authority.</div>
<div class="content">
<div class="paragraph">
<p><span class="image"><img src="images/result_maps.png" alt="result maps"></span></p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A cool feature of the <code>tmap</code> library is that it has an interactive mode, providing <a href="http://wiki.openstreetmap.org/wiki/Slippy_Map">slippy map</a> type functionality. This can be set with <code>tmap_mode("view")</code>. Enter this line into the R <em>Console</em> and then re-run the code that generates the choropleth. To reset back to static mode use <code>tmap_mode("plot")</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_task_4_data_challenge">Task 4. Data challenge</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Despite seeing various iterations of these maps in the weeks after the referendum, the very obvious contrast between most of England &amp; Wales (Leave) and Scotland and London, as well as certain university cities and towns (Remain), is surprising. Notice the spot of dark red in the East of England representing Cambridge.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Individual coding task
</td>
<td class="hdlist2">
<p>Can you come up with hypotheses as to why these differences in voting behaviour exist? Might the differences relate to differing characteristics of the underlying population?  Try plotting choropleth maps of some of the Census variables that are stored in the <code>data_gb</code> data frame. Do ask the demonstrators if you need help with wrangling R or the <code>tmap</code> library.</p>
</td>
</tr>
</table>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Instructions
</td>
<td class="hdlist2">
<p>Once you have finished your data analysis, save the R session with a sensible name by selecting <code>Session</code>, <code>Save Workspace As &#8230;&#8203;</code>, provide a sensible name and save to a sensible directory so that it can be returned to in the next session.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_task_5_coding_exercises_optional">Task 5. Coding exercises (optional)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you have finished exploring spatial structure in these demographics, try to develop your R skills by performing the coding operations listed below.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Individual coding task
</td>
<td class="hdlist2">
<p>Try writing commands to:</p>
<div class="ulist">
<ul>
<li>
<p>Calculate the <em>share of Leave</em> vote for the whole of GB.</p>
</li>
<li>
<p>Find the Local Authority (LA)  with the highest and lowest <em>share of Leave</em> vote.</p>
</li>
<li>
<p>Find the top 10 LAs most in favour of Leave and top 10 most in favour of Remain.</p>
</li>
<li>
<p><strong>Advanced</strong> Use <code>ggplot2</code> to generate <a href="https://en.wikipedia.org/wiki/Box_plot">box plots</a> displaying distributions of the Census variables.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_further_reading">Further reading</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are many books, tutorials and blogs introducing R as an environment for applied data analysis. Detailed below are resources that are particularly relevant to the material and discussion introduced in this session.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Wickham, H., etinkaya-Rundel, M., Grolemund, G. (2023) "<a href="https://r4ds.hadley.nz/">R for Data Science</a>, 2nd Edition", <strong>Orielly</strong>.</p>
</li>
<li>
<p>Ismay, C. and Kim, A. (2020) "<a href="https://moderndive.com/">Statistical Inference via Data Science: A ModernDive into R and the Tidyverse</a>" <strong>CRC Press</strong>.</p>
</li>
<li>
<p>Lovelace, R., Nowosad, J. &amp; Muenchow, J. (2019) "<a href="https://r.geocompx.org/">Geocomputation with R</a>", <strong>CRC Press</strong>.</p>
</li>
<li>
<p>Beecham, R., (2023) "<a href="https://vis4sds.github.io/vis4sds/">Visualization for Social Data Science</a>", <strong>CRC Press</strong> (in-development).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-10-21 15:30:11 +0100
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>